<aura:component controller="ProductController" access="global">

    <aura:registerEvent name = "vfEvent" type = "c:SendDataToVFEvent" />

    <aura:handler name="init" value="{!this}" action="{!c.init}" />

    <aura:handler name="FiltersApplyed" event="c:FiltersApplyedEvent" action="{!c.setProducts}" />

    <aura:handler name="pageTurnedEvent" event="c:TurnPageEvent" action="{!c.turnPageEventHandler}" />
    <!-- product shifts -->
    <aura:handler name="productSelected" event="c:ProductShippedEvent" action="{!c.showSelectedProduct}" />
    <aura:handler name="addProductToCompareListEvent" event="c:ProductShippedEvent"
        action="{!c.addProductToCompareListEventHandler}" />
    <aura:handler name="removeProductFromCompareListEvent" event="c:ProductShippedEvent"
        action="{!c.removeProductFromCompareListEventHandler}" />
    <!-- modal window events -->
    <aura:handler name="outletsMapOpened" event="c:BooleanShippedEvent" action="{!c.outletsMapOpenedEventHandler}" />
    <aura:handler name="currencyChangedEvent" event="c:StringShippedEvent" action="{!c.changeCurrency}" />
    <aura:handler name="isCaseModalWindowOpenEvent" event="c:BooleanShippedEvent"
        action="{!c.isCaseModalWindowOpenEventHandler}" />
    <aura:handler name="isOrderWindowOpenedEvent" event="c:BooleanShippedEvent"
        action="{!c.isOrderWindowOpenedEventHandler}" />
    <aura:handler name="isCompareWindowOpenedEvent" event="c:BooleanShippedEvent"
        action="{!c.isCompareWindowOpenedEventHandler}" />

    <!-- modal window flags -->
    <aura:attribute name="isOutletsMapOpened" type="boolean" default="FALSE" />
    <aura:attribute name="isCaseModalWindowOpen" type="boolean" default="FALSE" />
    <aura:attribute name="isOrderWindowOpened" type="boolean" default="FALSE" />
    <aura:attribute name="isCompareWindowOpened" type="boolean" default="FALSE" />
    <aura:attribute name="isOrderOpen" type="Boolean" default="false" />
    <!--  chosen products (for discription and ordering) -->
    <aura:attribute name="selectedProduct" type="Product2" />
    <aura:attribute name="selectedProductPrice" type="Integer" />
    <aura:attribute name="currencyRate" type="Object" default="{'value': 1, 'label':'USD'}"/>
    <!-- lisf of products -->
    <aura:attribute name="productsList" type="Product2[]" />
    <aura:attribute name="compareProductsList" type="Product2[]" />
    <!-- pagination markers -->
    <aura:attribute name="offset" type="Integer" default="0" />
    <aura:attribute name="limits" type="Integer" default="2" />


    <div>
        <!-- <lightning:button variant="base" label="label" title="title" onclick="{! c.sendDataVFPage }"/> -->
        <c:MainMenuComponent />
    </div>
    <div class="slds-box">
        <div class="slds-grid">
            <div class="slds-col slds-size_1-of-6">
                <c:SortingMenuComponent aura:id="sortingComponent" />
            </div>
            <div class="slds-col slds-size_4-of-6 slds-scrollable">
                <c:ProductViewComponent productsList="{!v.productsList}" currencyRate="{!v.currencyRate}"/>
            </div>
            <div class="slds-col slds-size_1-of-6">
                <aura:if isTrue="{!v.selectedProduct}">
                    <c:ProductDescription product="{!v.selectedProduct}"  productPrice="{!v.selectedProductPrice}"  currencyRate="{!v.currencyRate}"/>
                </aura:if>
            </div>
        </div>
        <div>
            <aura:if isTrue="{!v.isOutletsMapOpened}">
                <c:OutletMapModalWindowComponent />
            </aura:if>
            <aura:if isTrue="{!v.isOrderWindowOpened}">
                <c:OrderModalWindowComponent product="{!v.selectedProduct}" productPrice="{!v.selectedProductPrice}" />
            </aura:if>
            <aura:if isTrue="{!v.isCompareWindowOpened}">
                <c:CompareModalWindowComponent productsList="{!v.compareProductsList}" currencyRate="{!v.currencyRate}"/>
            </aura:if>
            <aura:if isTrue="{!v.isCaseModalWindowOpen}">
                <c:CaseModalWindowComponent />
            </aura:if>
        </div>
    </div>
</aura:component>